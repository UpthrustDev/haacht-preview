import React from 'react';
import Link from '../shared/Link';
import { getLanguage } from '../helpers/navigationUrl';
import _get from 'lodash/get';

const Popup = ({
  age,
  cookies,
  acceptCookies,
  acceptAge,
  agePopup,
  cookiesPopup,
  location,
  hideBackground,
}) => {
  if (!agePopup && !cookiesPopup) {
    return null;
  }
  return (
    <div>
      {age &&
        agePopup && (
          <div
            className="age-popup js-age-popup"
            style={
              hideBackground
                ? { background: 'transparent' }
                : {
                    backgroundImage: 'url(' + _get(agePopup, 'image.file.url') + ')',
                    backgroundPosition: 'center',
                    backgroundRepeat: 'no-repeat',
                    backgroundSize: 'cover',
                  }
            }
          >
            <div className="age-popup__box">
              <div className="age-popup__badge brewery-badge">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  xmlnsXlink="http://www.w3.org/1999/xlink"
                  width="93"
                  height="93"
                  viewBox="0 0 93 93"
                >
                  <defs>
                    <path id="a" d="M0 .011h92.99v93.01H0z" />
                  </defs>
                  <g fill="none" fillRule="evenodd">
                    <g transform="translate(0 -.032)">
                      <mask id="b" fill="#fff">
                        <use xlinkHref="#a" />
                      </mask>
                      <path
                        fill="#C3A572"
                        d="M92.99 46.515c0 25.686-20.818 46.507-46.495 46.507C20.815 93.022 0 72.2 0 46.515 0 20.831 20.815.01 46.495.01 72.172.01 92.99 20.831 92.99 46.515"
                        mask="url(#b)"
                      />
                    </g>
                    <path
                      fill="#FFF"
                      d="M53.242 69.578v-2.82c0-.49.038-.995.038-1.508 0-.05-.02-.1-.063-.126a.15.15 0 0 0-.136-.031l-.868.221a.16.16 0 0 0-.11.091.168.168 0 0 0 .008.145c.12.216.127.506.125.815v3.213c.005.341-.012.707-.143.892a.168.168 0 0 0-.01.168c.03.05.085.083.146.083h1.02c.061 0 .114-.033.145-.083a.165.165 0 0 0-.01-.168c-.132-.185-.146-.55-.142-.892m4.967.658c-.552-.003-.824-.391-.836-.926.001-.54.278-.909.73-1.227.537.33.943.645.943 1.243-.02.619-.23.89-.837.91m.122-4.581c.305 0 .466.284.473.651 0 .323-.128.632-.384.9-.36-.212-.608-.554-.608-.98.003-.32.214-.571.519-.571m1.097 2.233c-.163-.142-.327-.244-.44-.323-.015-.009-.025-.017-.039-.02.254-.174.866-.604.86-1.383-.01-.773-.772-1.072-1.413-1.072-.92 0-1.636.529-1.636 1.364-.004.005 0 .009-.002.01.002.45.25.778.478 1 .116.108.228.196.308.263.004 0 .008.005.012.012-.295.19-1.235.715-1.238 1.71.014.968 1.007 1.402 1.811 1.406.936-.004 1.97-.409 1.97-1.604 0-.637-.346-1.08-.67-1.363m5.088-2.798c-1.011.003-1.845.598-1.85 1.631.003.778.482 1.5 1.398 1.5a1.1 1.1 0 0 0 .72-.226.165.165 0 0 0 .058-.182.164.164 0 0 0-.155-.106h-.048c-.633-.011-.903-.434-.919-1.077.018-.619.216-.917.667-.925.564 0 .683.463.699 1.033.003 1.519-.98 3.276-2.568 3.708a.16.16 0 0 0-.12.155v.058c0 .07.049.135.118.155.062.016.144.041.248.041 2.1-.021 3.371-2.311 3.376-4.11 0-.475-.135-.893-.417-1.192-.278-.3-.696-.463-1.207-.463m5.541 5.146c-.553-.003-.825-.391-.838-.926.002-.54.281-.911.73-1.227.536.33.945.645.944 1.243-.022.617-.23.89-.836.91m.123-4.581c.302 0 .462.284.47.651a1.287 1.287 0 0 1-.385.9c-.359-.212-.606-.554-.606-.982.002-.315.212-.57.521-.57m1.095 2.238c-.165-.146-.326-.248-.442-.327-.013-.009-.024-.017-.036-.02.253-.174.863-.604.859-1.383-.012-.773-.773-1.072-1.413-1.072-.92 0-1.637.529-1.64 1.364 0 .009.003.009 0 .009.003.45.253.78.48 1.001.116.108.229.196.306.26l.015.013c-.296.193-1.238.721-1.238 1.711.015.969 1.006 1.403 1.809 1.403.937 0 1.97-.405 1.972-1.6 0-.637-.347-1.08-.672-1.359m-47.992-.237l.605-1.484.483 1.484h-1.088zm3.352 2.68l-.162-.297c-.8-1.482-1.32-3.235-1.84-4.858a.16.16 0 0 0-.152-.11h-.958c-.087 0-.16.071-.163.16l-.007.217c.028.547-1.67 4.121-2.102 4.638l-.177.228a.164.164 0 0 0-.016.173.16.16 0 0 0 .141.088h1.016a.156.156 0 0 0 .16-.186 1.817 1.817 0 0 1-.021-.283c-.007-.375.318-1.127.65-1.803h1.617l.846 2.17a.157.157 0 0 0 .15.102h.877c.055 0 .11-.03.138-.078.029-.05.029-.108.003-.161zm6.156-5.261h-.847a.154.154 0 0 0-.137.077.155.155 0 0 0-.003.157c.1.186.176.426.176.963v2.637l-1.55-2.182c-.245-.35-.763-1.214-.945-1.46-.116-.176-.318-.205-.452-.192h-.821a.16.16 0 0 0-.114.275c.18.167.218.569.21.964v1.728c.003.714-.004 1.696-.27 2.31a.157.157 0 0 0 .015.152c.028.045.08.072.134.072h.934a.164.164 0 0 0 .135-.072.167.167 0 0 0 .012-.152c-.214-.499-.233-1.192-.23-1.794v-2.029l2.816 4.011c.03.04.079.07.131.07h.577c.045 0 .086-.02.116-.049a.165.165 0 0 0 .046-.12 20.142 20.142 0 0 1-.017-.748v-3.25c0-.402.047-.794.225-1.134a.155.155 0 0 0-.003-.157.16.16 0 0 0-.138-.077m6.522-.002h-.844a.155.155 0 0 0-.138.08.157.157 0 0 0-.002.156c.098.186.172.426.175.963v2.64l-1.55-2.186c-.245-.35-.762-1.212-.944-1.46-.115-.174-.317-.204-.456-.193h-.819a.161.161 0 0 0-.112.277c.18.167.215.57.211.964v1.728c.002.715-.005 1.694-.27 2.31a.162.162 0 0 0 .014.152c.026.045.08.072.134.072h.933a.165.165 0 0 0 .136-.072.159.159 0 0 0 .01-.151c-.21-.5-.23-1.193-.23-1.795l.002-.223v-1.801l2.816 4.007c.028.04.078.07.131.07h.579c.042 0 .083-.02.114-.052a.167.167 0 0 0 .047-.117c-.01-.244-.016-.486-.016-.75v-3.25c0-.402.047-.793.223-1.133a.16.16 0 0 0-.144-.236m4.368 4.955c-.592-.008-.94-.304-1.183-.755-.238-.452-.329-1.052-.329-1.568.012-1.143.468-2.081 1.512-2.081.591.003.94.304 1.184.754.237.45.327 1.053.327 1.568-.011 1.14-.47 2.08-1.511 2.082m2.054-4.264c-.432-.512-1.1-.822-1.99-.819-1.784.003-2.739 1.389-2.74 2.986 0 .749.191 1.44.621 1.951.43.511 1.097.823 1.98.823h.011c1.784-.004 2.736-1.386 2.741-2.983 0-.755-.192-1.447-.623-1.958M12.393 56.2c0 .376.372.624.372.624H9.23s.373-.216.373-.624v-7.913c0-.4-.373-.625-.373-.625h3.535s-.372.196-.372.625v2.625h4.6v-2.625c0-.153-.37-.625-.37-.625h3.533s-.373.472-.373.625v7.913c0 .376.373.624.373.624h-3.533s.37-.234.37-.624v-3.168h-4.6v3.168zm15.406-6.374l-1.706 3.645h3.455l-1.75-3.645zm3.061 6.56c-.08-.208-.562-1.317-.604-1.415h-4.831c-.03.098-.53 1.229-.604 1.415-.072.189.062.437.062.437h-2.914s.225-.08.417-.458c.192-.377.84-1.933 1.27-2.884.429-.95.816-1.812 1.155-2.581.342-.77.62-1.41.845-1.916.22-.508.261-.618.33-.867.074-.247-.059-.456-.059-.456h3.932s-.115.238-.062.456c.055.218.075.229.22.555.145.324.336.733.573 1.226.235.494.495 1.038.781 1.634.284.6.569 1.197.854 1.796.284.594.552 1.158.8 1.695.252.532.457.98.604 1.342.115.277.417.458.417.458h-3.248s.141-.227.062-.437zm10.052-6.56l-1.706 3.645h3.456l-1.75-3.645zm3.062 6.56a.761.761 0 0 0-.075-.26 12.188 12.188 0 0 0-.362-.8 5.957 5.957 0 0 1-.167-.355h-4.83a2.684 2.684 0 0 1-.136.354 8.418 8.418 0 0 1-.197.416l-.19.384a.765.765 0 0 0-.083.26c0 .098.273.438.273.438h-3.124s.388-.387.417-.458c.416-.971.84-1.933 1.271-2.884a341.656 341.656 0 0 0 1.996-4.497c.225-.508.335-.796.335-.867 0-.126-.27-.456-.27-.456h4.35s-.27.33-.27.456c0 .04.073.229.219.555.145.324.336.733.571 1.226.238.494.498 1.038.783 1.634.282.6.567 1.197.851 1.796.286.594.554 1.158.804 1.695.249.532.45.983.603 1.342.026.07.418.458.418.458h-3.459s.272-.34.272-.437zm13.066-5.38s-.386-.508-.56-.617a2.954 2.954 0 0 0-.668-.304 7.677 7.677 0 0 0-.914-.237 5.007 5.007 0 0 0-1.029-.106c-.39 0-.786.05-1.188.148-.402.096-.763.25-1.083.449-.32.201-.58.458-.79.774-.21.311-.312.693-.312 1.14 0 .433.102.809.312 1.13.21.318.47.581.79.783.32.203.68.352 1.083.45.402.095.798.146 1.188.146.415 0 .808-.051 1.174-.158.367-.102.694-.226.979-.374.285-.145.506-.29.668-.436.158-.145.54-.72.54-.72l1.802 2.619s-.706.08-.947.205c-.246.12-.566.265-.97.423a9.13 9.13 0 0 1-3.245.564c-.766 0-1.511-.077-2.24-.227a5.645 5.645 0 0 1-1.948-.783 4.229 4.229 0 0 1-1.374-1.446c-.346-.599-.52-1.325-.52-2.187 0-.848.174-1.569.52-2.165a4.316 4.316 0 0 1 1.374-1.46 6.087 6.087 0 0 1 1.948-.82 9.525 9.525 0 0 1 2.24-.26c.456 0 .902.036 1.33.114.432.075.826.153 1.185.239.362.083.676.161.94.24.262.074 1.04.18 1.04.18l-1.325 2.695zM64 56.2c0 .152.37.624.37.624h-3.534s.372-.472.372-.624v-7.913c0-.153-.372-.625-.372-.625h3.534s-.37.472-.37.625v2.625h4.6v-2.625c0-.153-.372-.625-.372-.625h3.536s-.373.472-.373.625v7.913c0 .152.373.624.373.624h-3.536s.373-.472.373-.624v-3.168H64v3.168zm19.76-8.555v2.387s-.54-.25-.625-.25h-2.976V56.2c0 .153.268.627.268.627H77.1s.27-.474.27-.627v-6.415h-2.977c-.083 0-.625.25-.625.25v-2.388s.542.017.625.017h8.743c.085 0 .624-.017.624-.017M63.51 34.322c-.037-.087-.145-.204-.36-.18-.214.025-.181.22-.027.466.448.718-.151 1.731-.213 1.861-.066.131.11.183.181.092.073-.09.92-1.064.42-2.24zm-4.174-1.559c.01-.158-.89-.36-2.018-.439a192.54 192.54 0 0 0-26.037 0c-1.126.079-2.032.281-2.017.439.01.16.932.217 2.056.14 8.64-.587 17.313-.587 25.96-.002 1.12.08 2.04.022 2.056-.138zM40.43 24.627c-3.265.864-8.52 2.25-10.011 5.56-.162.358.04.765 1.032.765l4.575-.219c1.057 0 .992.007.893-.374-.308-1.18 1.014-3.048 4.69-5.453.531-.345.642-.758-1.18-.279zm8.144-11.44c-.34.262-.716.582-.716.582v4.87h.716v-5.452zm14.399 18.892c.067.302.348.297.348-.068 0-1.179.378-3.59-4.372-5.755-3.236-1.474-7.896-2.756-8.875-3.355-1.27-.779-1.403-1.912-1.327-2.72-.01.017-.886-.017-.886 0-.018 1.14.095 2.448 1.615 3.279 1.013.55 6.051 1.92 9.218 3.511 3.87 1.946 3.922 3.388 4.207 4.696l.072.412zM43.258 14.527s3.793-2.219 6.4-3.843l.01 7.978s.277-.005.724-.005c.517 0 .596.497.186 1.052-.678.908-.347 1.934.606 2.623.956.69 5.005 1.952 8.508 3.386 4.805 1.973 4.902 6.535 4.902 7.372 0 0 .747.016.994.016.245 0 .51.442-.029.696-.537.253-.762.696-.639 1.073.076.232.5 1.307.5 1.859 0 .96-.26 2.332-.26 2.723l-37.318-.024c.055-.443-.545-2.287-.269-3.21.164-.555.492-1.085.518-1.326.068-.535-.194-.834-.686-1.183-.486-.342-.267-.613-.02-.613.245 0 .993-.014.993-.014 0-.836.096-5.424 4.903-7.4 3.498-1.429 7.65-2.771 8.604-3.462.953-.685 1.353-1.62.676-2.53-.41-.554-.558-1.032-.044-1.032.448 0 .734-.006.734-.006l.007-4.13z"
                    />
                  </g>
                </svg>
              </div>
              <h3 className="age-popup__title">{agePopup.title}</h3>
              <div className="age-popup__options u-display--flex u-align--center u-justify--center">
                <button className="c-button js-age-action-no" data-age-action="no">
                  {_get(agePopup, 'noButton')}
                </button>
                <button
                  onClick={acceptAge}
                  className="c-button js-age-action-yes"
                  data-age-action="yes"
                >
                  {_get(agePopup, 'yesButton')}
                </button>
              </div>
            </div>
          </div>
        )}

      {cookies &&
        cookiesPopup && (
          <div
            className="cookie-message js-cookie-message"
            style={hideBackground ? { zIndex: '9999999999' } : {}}
          >
            <p>{_get(cookiesPopup, 'title.childMarkdownRemark.internal.content')}</p>
            <div className="cookie-message__options u-display--flex u-align--center">
              <button onClick={acceptCookies} className="c-button js-cookie-message-ok">
                {_get(cookiesPopup, 'okButton')}
              </button>
              {cookiesPopup.disclaimer && (
                <Link
                  to={`${getLanguage(location) ? getLanguage(location) : location}/${_get(
                    cookiesPopup,
                    'disclaimer.linkSlug'
                  )}`}
                >
                  {_get(cookiesPopup, 'disclaimer.title')}
                </Link>
              )}
            </div>
          </div>
        )}
    </div>
  );
};
export default Popup;
